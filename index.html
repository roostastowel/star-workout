<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Workout for Star</title>

<link rel="manifest" href="manifest.webmanifest">
<meta name="theme-color" content="#a8325e">

<style>
  :root{
    --bg: #fdecef;
    --card: #ffffff;
    --ink: #3a2a2f;
    --muted: #6b4b55;
    --accent: #a8325e;
    --accent2: #f3b6c8;
    --shadow: rgba(168,50,94,0.14);
  }
  *{ box-sizing:border-box; }
  body{
    margin:0;
    padding:16px;
    background:var(--bg);
    color:var(--ink);
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,system-ui,Arial,sans-serif;
    line-height:1.55;
  }
  .wrap{ max-width:860px; margin:0 auto; }
  header{
    text-align:center;
    margin:8px 0 14px;
  }
  h1{
    margin:6px 0 6px;
    font-size:1.35rem;
    color:var(--accent);
    letter-spacing:0.2px;
  }
  .sub{
    margin:0;
    color:var(--muted);
    font-size:0.95rem;
  }
  .pillrow{
    display:flex;
    flex-wrap:wrap;
    gap:8px;
    justify-content:center;
    margin-top:10px;
  }
  .pill{
    background:rgba(168,50,94,0.08);
    border:1px solid rgba(168,50,94,0.18);
    color:var(--accent);
    padding:6px 10px;
    border-radius:999px;
    font-size:0.85rem;
  }

  .card{
    background:var(--card);
    border-radius:16px;
    box-shadow:0 6px 16px var(--shadow);
    padding:14px;
    margin:12px 0;
    border:1px solid rgba(168,50,94,0.10);
  }
  .card h2{
    margin:0 0 10px;
    font-size:1.05rem;
    color:var(--accent);
  }

  .weekgrid{
    display:grid;
    grid-template-columns: 1fr;
    gap:12px;
  }
  @media (min-width:720px){
    .weekgrid{ grid-template-columns: 1fr 1fr; }
  }

  .day{
    border:1px solid rgba(168,50,94,0.12);
    border-radius:16px;
    padding:12px;
    background:rgba(253,236,239,0.35);
  }
  .dayhead{
    display:flex;
    align-items:flex-start;
    justify-content:space-between;
    gap:10px;
    margin-bottom:6px;
  }
  .dow{
    font-weight:800;
    color:var(--accent);
    font-size:1.02rem;
  }
  .tag{
    font-size:0.82rem;
    color:var(--muted);
    margin-top:2px;
    text-align:right;
  }

  .checkline{
    display:flex;
    align-items:center;
    gap:10px;
    margin:8px 0 6px;
  }
  input[type="checkbox"]{
    transform: translateY(1px) scale(1.15);
    accent-color: var(--accent);
  }

  .btnrow{
    display:flex;
    flex-wrap:wrap;
    gap:10px;
    margin-top:12px;
  }
  button{
    border:1px solid rgba(168,50,94,0.25);
    background:rgba(168,50,94,0.08);
    color:var(--accent);
    padding:9px 12px;
    border-radius:12px;
    font-weight:700;
    cursor:pointer;
  }
  button:active{ transform:scale(0.99); }

  details{
    border:1px solid rgba(168,50,94,0.12);
    border-radius:14px;
    padding:10px 12px;
    background:#fff;
    margin:10px 0 0;
  }
  details[open]{ background:rgba(253,236,239,0.25); }
  summary{
    cursor:pointer;
    font-weight:800;
    color:var(--accent);
    list-style:none;
    outline:none;
  }
  summary::-webkit-details-marker{ display:none; }

  .small{ color:var(--muted); font-size:0.92rem; margin:8px 0 0; }
  .setnote{ color:var(--muted); font-size:0.90rem; margin:8px 0; }
  .list{ margin:0; padding-left:18px; }
  .list li{ margin:6px 0; }

  .hint{
    background:rgba(168,50,94,0.06);
    border:1px solid rgba(168,50,94,0.12);
    padding:10px 12px;
    border-radius:12px;
    color:var(--muted);
    font-size:0.92rem;
    margin-top:10px;
  }

  .statusbar{
    display:flex;
    flex-wrap:wrap;
    gap:10px;
    align-items:center;
    justify-content:space-between;
    margin-top:10px;
    padding-top:10px;
    border-top:1px solid rgba(168,50,94,0.12);
    color:var(--muted);
    font-size:0.9rem;
  }
  .dot{
    display:inline-block;
    width:9px; height:9px;
    border-radius:50%;
    background:#999;
    margin-right:6px;
    vertical-align:middle;
  }
  .online .dot{ background:#2ea043; }
  .offline .dot{ background:#d73a49; }
</style>
</head>

<body>
<div class="wrap">
  <header>
    <h1>Home Plan (Yoga + Strength + Cardio)</h1>
    <p class="sub">Tap a day to see exactly what to do. No gym required.</p>
    <div class="pillrow">
      <div class="pill">Yoga: Mon–Sat (~30 min)</div>
      <div class="pill">Strength: 2× / week</div>
      <div class="pill">Cardio: home-first</div>
    </div>
  </header>

  <section class="card">
    <h2>Week at a Glance</h2>

    <div class="weekgrid">

      <!-- Monday -->
      <div class="day">
        <div class="dayhead">
          <div><div class="dow">Monday</div></div>
          <div class="tag">Strength A</div>
        </div>

        <div class="checkline">
          <input id="mon" type="checkbox" />
          <label for="mon"><strong>Done today</strong></label>
        </div>

        <details>
          <summary>Today’s Plan</summary>
          <ul class="list">
            <li>Yoga (Adriene)</li>
            <li>Strength A (20–40 min)</li>
            <li>Optional: Easy cardio (10–20 min)</li>
          </ul>
          <div class="hint">
            Low energy? Do <strong>1 round</strong> of Strength A and stop. That still counts.
          </div>
        </details>

        <details>
          <summary>Strength A (Full Body)</summary>
          <p class="setnote"><strong>2–3 rounds</strong> • Rest ~60–90 sec • Controlled reps</p>
          <ol class="list">
            <li><strong>Goblet squat</strong> (DB/KB) — 8–12 reps</li>
            <li><strong>DB Romanian deadlift</strong> — 8–12 reps</li>
            <li><strong>DB floor press</strong> (or bench press) — 8–12 reps</li>
            <li><strong>1-arm DB row</strong> — 8–10 reps/side</li>
            <li><strong>Booty band lateral walks</strong> — 12–15 steps/side</li>
            <li><strong>Plank</strong> or <strong>dead bug</strong> — 30–45 sec</li>
          </ol>
          <div class="hint">
            Progression: if you hit the top rep range with great form, increase weight slightly next week.
          </div>
        </details>

        <details>
          <summary>Optional Cardio (Easy)</summary>
          <p class="setnote">Choose 1 (10–20 minutes):</p>
          <ul class="list">
            <li>Brisk walk (conversation pace)</li>
            <li>Bike (easy steady effort)</li>
            <li>Easy stairs</li>
          </ul>
        </details>
      </div>

      <!-- Tuesday -->
      <div class="day">
        <div class="dayhead">
          <div><div class="dow">Tuesday</div></div>
          <div class="tag">Work 5–9 pm</div>
        </div>

        <div class="checkline">
          <input id="tue" type="checkbox" />
          <label for="tue"><strong>Done today</strong></label>
        </div>

        <details>
          <summary>Today’s Plan</summary>
          <ul class="list">
            <li>Yoga (Adriene)</li>
            <li>That’s it — keep it easy</li>
          </ul>
          <div class="hint">
            Optional: gentle 10–20 minute walk if it feels good.
          </div>
        </details>
      </div>

      <!-- Wednesday -->
      <div class="day">
        <div class="dayhead">
          <div><div class="dow">Wednesday</div></div>
          <div class="tag">Optional cardio</div>
        </div>

        <div class="checkline">
          <input id="wed" type="checkbox" />
          <label for="wed"><strong>Done today</strong></label>
        </div>

        <details>
          <summary>Today’s Plan</summary>
          <ul class="list">
            <li>Yoga (Adriene)</li>
            <li>Optional: Zone 2 cardio (20–40 min)</li>
          </ul>
          <div class="hint">
            Zone 2 = you can talk in full sentences. Comfortable and steady.
          </div>
        </details>

        <details>
          <summary>Zone 2 Cardio Menu</summary>
          <ul class="list">
            <li>Brisk walk (20–40 min)</li>
            <li>Bike (20–40 min)</li>
            <li>Easy stairs (10–20 min)</li>
          </ul>
        </details>
      </div>

      <!-- Thursday -->
      <div class="day">
        <div class="dayhead">
          <div><div class="dow">Thursday</div></div>
          <div class="tag">Strength B</div>
        </div>

        <div class="checkline">
          <input id="thu" type="checkbox" />
          <label for="thu"><strong>Done today</strong></label>
        </div>

        <details>
          <summary>Today’s Plan</summary>
          <ul class="list">
            <li>Yoga (Adriene)</li>
            <li>Strength B (20–40 min)</li>
            <li>Optional: Short intervals (8–12 min)</li>
          </ul>
        </details>

        <details>
          <summary>Strength B (Full Body)</summary>
          <p class="setnote"><strong>2–3 rounds</strong> • Rest ~60–90 sec • Posture crisp</p>
          <ol class="list">
            <li><strong>Reverse lunge</strong> (BW or DB) — 8 reps/side</li>
            <li><strong>KB deadlift</strong> <em>or</em> <strong>KB swings</strong> — 10–15 reps</li>
            <li><strong>Standing DB shoulder press</strong> — 8–10 reps</li>
            <li><strong>Bent-over DB row</strong> — 8–12 reps</li>
            <li><strong>Farmer carry</strong> (DB/KB) — 30–45 sec</li>
            <li><strong>Side plank</strong> <em>or</em> <strong>bird dog</strong> — 30 sec/side</li>
          </ol>
          <div class="hint">
            If swings don’t feel great that day, use KB deadlifts instead.
          </div>
        </details>

        <details>
          <summary>Optional Intervals (8–12 min)</summary>
          <p class="setnote">Pick one:</p>
          <ul class="list">
            <li>30 sec fast walk + 90 sec easy × 5–8 rounds</li>
            <li>Step-ups: 20 sec work + 40 sec rest × 8–12</li>
            <li>KB swings: 20 sec on + 40 sec off × 8–12 (only if comfortable)</li>
          </ul>
          <div class="hint">
            Keep intervals “spicy but doable.” Stop with gas left in the tank.
          </div>
        </details>
      </div>

      <!-- Friday -->
      <div class="day">
        <div class="dayhead">
          <div><div class="dow">Friday</div></div>
          <div class="tag">Recovery-ish</div>
        </div>

        <div class="checkline">
          <input id="fri" type="checkbox" />
          <label for="fri"><strong>Done today</strong></label>
        </div>

        <details>
          <summary>Today’s Plan</summary>
          <ul class="list">
            <li>Yoga (Adriene)</li>
            <li>Optional: easy walk 15–30 min</li>
          </ul>
        </details>
      </div>

      <!-- Saturday -->
      <div class="day">
        <div class="dayhead">
          <div><div class="dow">Saturday</div></div>
          <div class="tag">Fun movement</div>
        </div>

        <div class="checkline">
          <input id="sat" type="checkbox" />
          <label for="sat"><strong>Done today</strong></label>
        </div>

        <details>
          <summary>Today’s Plan</summary>
          <ul class="list">
            <li>Yoga (Adriene)</li>
            <li>Choose one: long walk / hike / bike / dance</li>
          </ul>
          <div class="hint">
            This is the “do something you like” day. Keep it enjoyable.
          </div>
        </details>
      </div>

      <!-- Sunday -->
      <div class="day">
        <div class="dayhead">
          <div><div class="dow">Sunday</div></div>
          <div class="tag">Rest</div>
        </div>

        <div class="checkline">
          <input id="sun" type="checkbox" />
          <label for="sun"><strong>Done today</strong></label>
        </div>

        <details>
          <summary>Today’s Plan</summary>
          <ul class="list">
            <li>Rest</li>
            <li>Or gentle walk + light stretch</li>
          </ul>
          <div class="hint">
            If you’re feeling “tight,” do 10 minutes of easy walking — then stop.
          </div>
        </details>
      </div>

    </div>

    <div class="btnrow">
      <button type="button" onclick="resetWeek()">Reset week</button>
      <button type="button" onclick="expandAll()">Expand all days</button>
      <button type="button" onclick="collapseAll()">Collapse all days</button>
    </div>

    <div id="status" class="statusbar offline" aria-live="polite">
      <div><span class="dot"></span><span id="netText">Offline status unknown</span></div>
      <div>Week resets Mondays • <span id="resetText">Last reset: —</span></div>
    </div>

    <p class="small">
      Consistency rule: missed a day? Just continue. Don’t “make up” workouts.
    </p>
  </section>

  <section class="card">
    <h2>Quick “Too Busy” Option (10–15 min)</h2>
    <div class="hint">
      <strong>1 round</strong> of: goblet squat (10) → DB row (8/side) → floor press (10) → plank (30 sec).<br>
      Done. Keep the streak alive.
    </div>
  </section>

</div>

<script>
  // ---- Checkbox persistence + auto weekly reset on Monday (local time) ----
  const cbIds = ["mon","tue","wed","thu","fri","sat","sun"];
  const STORAGE_PREFIX = "wk_";
  const META_LAST_RESET = "wk_last_reset_monday_ymd"; // store Monday date for current week

  function ymdLocal(d = new Date()){
    const y = d.getFullYear();
    const m = String(d.getMonth() + 1).padStart(2, "0");
    const day = String(d.getDate()).padStart(2, "0");
    return `${y}-${m}-${day}`;
  }

  // Monday of the current week (Mon as start of week), in local time
  function mostRecentMondayYMD(d = new Date()){
    const copy = new Date(d.getFullYear(), d.getMonth(), d.getDate()); // strip time
    const dow = copy.getDay(); // 0=Sun,1=Mon,...6=Sat
    const daysSinceMonday = (dow + 6) % 7; // Mon->0, Tue->1, ... Sun->6
    copy.setDate(copy.getDate() - daysSinceMonday);
    return ymdLocal(copy);
  }

  function setAllChecked(checked){
    cbIds.forEach(id => {
      localStorage.setItem(STORAGE_PREFIX + id, checked ? "1" : "0");
      const el = document.getElementById(id);
      if (el) el.checked = checked;
    });
  }

  function autoResetIfNeeded(){
    const thisWeeksMonday = mostRecentMondayYMD(new Date());
    const lastResetMonday = localStorage.getItem(META_LAST_RESET);

    // If we've crossed into a new week (new Monday), reset once.
    if (lastResetMonday !== thisWeeksMonday){
      setAllChecked(false);
      localStorage.setItem(META_LAST_RESET, thisWeeksMonday);
    }

    // update UI
    const resetText = document.getElementById("resetText");
    if (resetText) resetText.textContent = `Last reset: ${localStorage.getItem(META_LAST_RESET) || "—"}`;
  }

  function loadCheckboxes(){
    cbIds.forEach(id => {
      const el = document.getElementById(id);
      if (!el) return;
      const saved = localStorage.getItem(STORAGE_PREFIX + id);
      el.checked = (saved === "1");
      el.addEventListener("change", () => {
        localStorage.setItem(STORAGE_PREFIX + id, el.checked ? "1" : "0");
      });
    });
  }

  function resetWeek(){
    setAllChecked(false);
    localStorage.setItem(META_LAST_RESET, mostRecentMondayYMD(new Date()));
    const resetText = document.getElementById("resetText");
    if (resetText) resetText.textContent = `Last reset: ${localStorage.getItem(META_LAST_RESET) || "—"}`;
  }

  function expandAll(){ document.querySelectorAll("details").forEach(d => d.open = true); }
  function collapseAll(){ document.querySelectorAll("details").forEach(d => d.open = false); }

  // ---- Offline support: register service worker ----
  async function registerSW(){
    if (!("serviceWorker" in navigator)) return;
    try{
      await navigator.serviceWorker.register("./sw.js", { scope: "./" });
    }catch(e){
      // If SW fails, page still works online; ignore.
    }
  }

  function updateNetworkBadge(){
    const status = document.getElementById("status");
    const netText = document.getElementById("netText");
    if (!status || !netText) return;

    const online = navigator.onLine;
    status.classList.toggle("online", online);
    status.classList.toggle("offline", !online);
    netText.textContent = online ? "Online (offline-ready after first load)" : "Offline (cached)";
  }

  // Run on page load:
  autoResetIfNeeded();
  loadCheckboxes();
  registerSW();
  updateNetworkBadge();
  window.addEventListener("online", updateNetworkBadge);
  window.addEventListener("offline", updateNetworkBadge);
</script>
</body>
</html>
